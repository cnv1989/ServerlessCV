AWSTemplateFormatVersion: 2010-09-09
Transform: AWS::Serverless-2016-10-31

Resources:

  ProcessImage:
    Type: AWS::Serverless::Function
    Properties:
      Handler: process.handler
      Runtime: python2.7
      CodeUri: lambdas/image_processing/
      Timeout: 300
      MemorySize: 3008
      Role: !Join ['', ['arn:aws:iam::', !Ref 'AWS::AccountId', ':role/LambdaExecutionRole']]
      Events:
        ResizeImage:
            Type: Api
            Properties:
                Path: '/image/process'
                Method: post

  Yolo:
    Type: AWS::Serverless::Function
    Properties:
      FunctionName: Yolo
      Handler: yolo_model.classify
      Runtime: python2.7
      CodeUri: lambdas/yolo/
      Timeout: 300
      MemorySize: 3008
      Role: !Join ['', ['arn:aws:iam::', !Ref 'AWS::AccountId', ':role/LambdaExecutionRole']]